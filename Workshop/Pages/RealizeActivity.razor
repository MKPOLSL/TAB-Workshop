@page "/realizeActivity"

@using System.Threading.Tasks
@using System.Text.Json;
@using System.Text.Json.Serialization;
@inject IActivityService activityService
@inject Microsoft.AspNetCore.Components.NavigationManager navigationManager

<head>
    Realize Acivity
</head>
<body>
    <table id="activityTable" class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Type</th>
                <th>Description</th>
                <th>Result</th>
                <th>Status</th>
                <th>Registered date</th>
                <th>End date</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var activity in activities)
            {
                <tr @onclick="() => ChangePage(activity)">
                    <td>@activity.ActivityType</td>
                    <td>@activity.Description</td>
                    <td>@activity.Result</td>
                    <td>@activity.Status</td>
                    <td>@activity.Registered</td>
                    <td>@activity.FinishedOrCancelled</td>
                </tr>
            }
        </tbody>
    </table>
</body>

@code {
    protected override async Task OnInitializedAsync()
    {
        activities = new List<Activity> { new Activity() }; // activityService.GetAllActivities().ToList();
        await base.OnInitializedAsync();
    }

    public List<Activity> activities = new List<Activity>();

    protected void ChangePage(Activity activity)
    {
        navigationManager.NavigateTo($"/editActivity/{JsonSerializer.Serialize(activity)}");
    }
}
